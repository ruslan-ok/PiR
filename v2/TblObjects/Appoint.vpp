//------------------------------------------------------------------------------
//                                                      (c) Корпорация Галактика
// Заработная плата по отделу
// Окно редактирования назначения сотрудника
//------------------------------------------------------------------------------

Window wnAppoint 'Назначение сотрудника';
  show at(,, 80, 10);

Screen scAppoint ('',, sci178Esc);
  table mtAppoint;
Fields
  mtStruct.Name: skip;
  mtAppoint.TabNum: NoProtect;
  mtAppoint.dBeg  : NoProtect;
  mtAppoint.dEnd  : NoProtect;
  mtDepart.Name ('',, sci1378Esc): Protect;
  mtPost.Name   ('',, sci1378Esc): Protect;
  mtAppoint.Salary (''): [13.2,'\2p[|-]366`666`666~99'], NoProtect;
  mtAppoint.Currency: NoProtect;
  mtAppoint.TaxDed: NoProtect;
  mtAppoint.Info: NoProtect;
<<

   `Сотрудник`    .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
                                          `Табельный номер` .@@@@@@@@@@@@
   `Назначение с` .@@@@@@@@@@@@               `Контракт до` .@@@@@@@@@@@@
   `Отдел`        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
   `Должность`    .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
   `Оклад`        .@@@@@@@@@@@@ .@@@@@@@@          `Льгота` .@@@@@@@@@@@@
   `Коммент`      .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
>>
End;

End;

TableEvent
  table mtAppoint;

cmInsertRecord:
  insert current mtAppoint;

cmUpdateRecord:
  update current mtAppoint;

cmDeleteRecord:
  if (message('Удалить назначение?', Confirmation + YesNo) = cmYes)
    delete current mtAppoint;

end;
